!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t){let n;function r(e,t="black"){new Promise((n,r)=>{console.log(`${(new Date).toLocaleTimeString()}: ${t} ${e.message} ${e.time}`)}).then();let n=document.createElement("li");n.style.color=t,n.innerHTML=`${new Date(e.time).toLocaleTimeString()}: ${e.message}`,data.appendChild(n)}function i(){let e=new Date-n,t=Math.round(e/1e3),r=0;t>60&&(r=Math.floor(t/60),t%=60),$("#time").text(`${r}:${t}`)}$(()=>{$(".portlet").draggable({cursor:"move"}).addClass("ui-widget ui-widget-content ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-circle-triangle-n portlet-toggle'></span>"),$("#currentArt").draggable({cursor:"move"}),$(".portlet-toggle").on("click",(function(){var e=$(this);e.toggleClass("ui-icon-circle-triangle-n uui-icon-circle-triangle-s"),e.closest(".portlet").find(".portlet-content").toggle()}));$("#handle");$("#slider").slider({create:function(){},slide:(e,t)=>{$("#newPrice").text("Повысить цену на: "+t.value)}});let e,t,o=io.connect("http://localhost:3030"),a="0",l=!1;function c(e,t){o&&o.json.emit(e,{value:t})}o.on("connect",()=>{o.json.emit("hello",{name:$("#name").text()})}),o.on("msg",e=>{r(e,"blue")}),o.on("start",o=>{new Promise((t,n)=>{e=parseInt(o.pause),setTimeout(()=>{c("endPause","next art")},e)}).then(),r(o,"red"),$.get("/next/art/"+a).done(e=>{$("img").attr("src",e.src),$("#nameArt").text(`${e.author} - ${e.name}`),$("#price").text(e.price),$("#slider").slider({max:parseInt(e.maxStep),min:parseInt(e.minStep)}),$("#newPrice").text("Повысить цену на: "+$("#slider").slider("value")),n=new Date,t=setInterval(i,1e3),a=e.id})}),o.on("market",e=>{l=!0,r(e)}),o.on("endMarket",n=>{new Promise((e,t)=>{r(n,"purple"),l=!1}).then(),clearInterval(void 0),a!==$("#count").text()?(new Promise((t,n)=>{setTimeout(()=>{c("endPause","next art")},e)}).then(),$.get("/next/art/"+a).done(e=>{new Promise((t,n)=>{$("img").attr("src",e.src),$("#nameArt").text(`${e.author} - ${e.name}`),$("#price").text(e.price),$("#slider").slider({max:parseInt(e.maxStep),min:parseInt(e.minStep)}),$("#newPrice").text("Повысить цену на: "+$("#slider").slider("value")),a=e.id}).then()})):(clearInterval(t),c("endAuction","end"),$("img").attr("src","/public/images/end.jpg"),$("#nameArt").text(""),$("#price").text(""))}),o.on("price",e=>{r(e,"green"),$("#price").text(parseInt($("#price").text())+parseInt(e.up))}),o.on("win",e=>{new Promise((e,t)=>{let n=document.createElement("li");n.innerHTML=`${$("#nameArt").text()} ${$("#price").text()}`,purchases.appendChild(n),$("#money").text(parseInt($("#money").text())-parseInt($("#price").text())),o.json.emit("toAdmin",{name:$("#name").text(),money:$("#money").text(),art:$("#nameArt").text()})}).then()}),o.on("END",e=>{r(e,"red")}),$("#newPriceButton").on("click",()=>{if(l){if(parseInt($("#money").text())-parseInt($("#price").text())-parseInt($("#slider").slider("value"))<0)return void window.alert("Недостаточно средств!");console.log($("#slider").slider("value")),o.json.emit("newPrice",{name:$("#name").text(),up:$("#slider").slider("value")})}})})}});